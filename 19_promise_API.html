<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise based API</title>
</head>
<body>
    <Label>Enter Name</Label>
    <input type="text" placeholder="name" id="name">
    <input type="number" placeholder="time" id="time">
    <button>Submit</button>
    <script>
        const btn = document.querySelector("button");

        // function alarm(name, time) {
        //     setTimeout(function() {
        //         document.write(`Wake up ${name}!`);
        //     }, time);
        // }
        // normal function with timeout 


        // function returning promise
        function alarm(name, time){
            return new Promise((resolve, reject) => {
                if(time < 0){
                    throw new Error(`Negative timer not allowed`);
                }
                setTimeout(function() {
                    resolve(`Wake up ${name}`);
                }, time);
            })
        }

        btn.addEventListener("click", async () => {
            const name = document.getElementById("name").value;
            const time = document.getElementById("time").value;
            // const alarmPromise = alarm(name, time)
            //     .then((response) => {
            //         console.log(response);
            //     })
            //     .catch((e) => {
            //         console.error(e);
            //     });

            // above implementation is using promises for 


            const alarmPromise = await alarm(name, time);
            console.log(alarmPromise);
            
        });
    </script>
</body>
</html>